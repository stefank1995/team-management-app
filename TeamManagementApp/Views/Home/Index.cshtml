@using TeamManagementApp.Controllers;
@{
	ViewData["Title"] = "Home Page";   
}

<div class="">
    <div>
        <h3>Kanban Board</h3>
        <form asp-area="" asp-controller="Home" asp-action="RemoveAllCards">
            <button type="button" class="btn btn-close" onclick="location.href='@Url.Action("RemoveAllCards", "HomeController")'"></button>
        </form>
    </div>
    <div class="control-section">
        <div class="content-wrapper">
            <ejs-kanban id="Kanban" keyField="Status" created="onKanbanCreated">
			    <e-data-manager url="/Home/LoadCard" updateUrl="/Home/UpdateCard" removeUrl="/Home/RemoveCard" insertUrl="/Home/InsertCard" crudUrl="/Home/CrudCard" adaptor="UrlAdaptor" crossDomain="false"></e-data-manager>
			    <e-kanban-columns>
				    <e-kanban-column headerText="To Do" keyField="Open" showAddButton="true" ></e-kanban-column>
				    <e-kanban-column headerText="In Progress" keyField="InProgress"></e-kanban-column>
				    <e-kanban-column headerText="In Review" keyField="Review"></e-kanban-column>
				    <e-kanban-column headerText="Done" keyField="Close"></e-kanban-column>
			    </e-kanban-columns>
			    <e-kanban-cardsettings headerField="RankId" contentField="Summary" template="#cardTemplate" selectionType = "Multiple"></e-kanban-cardsettings>
			    <e-kanban-swimlanesettings keyField="AssigneeId" textField="Assignee" showEmptyRow=true ></e-kanban-swimlanesettings>
		 
			    <e-kanban-stackedHeaders>
						    <e-kanban-stackedHeader text="To Do" keyFields="Open"></e-kanban-stackedHeader>
						    <e-kanban-stackedHeader text="Development Phase" keyFields="InProgress, Review"></e-kanban-stackedHeader>
						    <e-kanban-stackedHeader text="Done" keyFields="Close"></e-kanban-stackedHeader>
			    </e-kanban-stackedHeaders>
		    </ejs-kanban>
        </div>
	</div>
    
</div>

<script id="cardTemplate" type="text/x-jsrender">
    <table class="card-template-wrap">
        <colgroup>
            <col style="width:15%">
            <col style="width:85%">
        </colgroup>
        <tbody>
            <tr>
                <td class="card-icon-wrap">
                    <div class="card-icon e-icons ${Status}"></div>
                </td>
                <td class="card-details-wrap">
                    <table>
                        <tbody>
                            <tr>
                                <td class="CardHeader">Id:</td>
                                <td>${RankId}</td>
                            </tr>
                            <tr>
                                <td class="CardHeader">Summary:</td>
                                <td>${Summary}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
</script>





<style type="text/css">

    .prop-grid .row {
        padding: 10px 0;
    }

    .e-kanban th.e-template {
        text-align: center;
    }

    .e-kanban .e-card {
        height: auto !important;
    }

    .e-kanban.e-rtl th.e-template {
        text-align: right;
    }

    .e-kanban.e-rtl .header-template-wrap .header-text {
        margin-right: 15px;
    }

    .e-kanban .card-template-wrap {
        line-height: 1.2;
        font-size: 12px;
        height: 100%;
        table-layout: fixed;
        width: 100%;
    }

    .e-kanban .card-template-wrap td {
        background: none !important;
        border: none !important;
        height: auto !important;
        padding: 2px;
        line-height: 1.6;
    }
   
</style>

<script>
    var kanbanObj;
	var statusData = ['Open', 'InProgress', 'Testing', 'Close'];

	function onKanbanCreated() {
		kanbanObj = this;
	}

	
</script>
